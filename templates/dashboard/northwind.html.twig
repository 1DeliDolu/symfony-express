{% extends 'admin_base.html.twig' %}

{% block title %}Northwind Dashboard{% endblock %}
{% block page_title %}Northwind Dashboard{% endblock %}

{% block body %}
{% if error is defined %}
<!-- Error Message -->
<div class="mb-6 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-800 dark:bg-red-900/20">
    <div class="flex items-center">
        <svg class="mr-3 h-5 w-5 fill-red-500" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <p class="text-sm font-medium text-red-800 dark:text-red-200">{{ error }}</p>
    </div>
</div>
{% endif %}

<!-- Statistics Cards -->
<div class="grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-6 xl:grid-cols-4 2xl:gap-7 mb-6">
    <!-- Total Products Card -->
    <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="flex items-center justify-between">
            <div>
                <h4 class="text-xl font-bold text-gray-900 dark:text-white">{{ totalProducts }}</h4>
                <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Gesamtanzahl Produkte</span>
            </div>
            <div class="flex h-12 w-12 items-center justify-center rounded-full bg-blue-50 dark:bg-blue-900/20">
                <svg class="fill-blue-600 dark:fill-blue-400" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2z"/>
                </svg>
            </div>
        </div>
        <div class="mt-4">
            <span class="text-sm font-medium text-blue-600 dark:text-blue-400">
                Produkte anzeigen →
            </span>
        </div>
    </div>

    <!-- Total Customers Card -->
    <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="flex items-center justify-between">
            <div>
                <h4 class="text-xl font-bold text-gray-900 dark:text-white">{{ totalCustomers }}</h4>
                <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Gesamtanzahl Kunden</span>
            </div>
            <div class="flex h-12 w-12 items-center justify-center rounded-full bg-green-50 dark:bg-green-900/20">
                <svg class="fill-green-600 dark:fill-green-400" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </div>
        </div>
        <div class="mt-4">
            <span class="text-sm font-medium text-green-600 dark:text-green-400">
                Kunden anzeigen →
            </span>
        </div>
    </div>

    <!-- Total Orders Card -->
    <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="flex items-center justify-between">
            <div>
                <h4 class="text-xl font-bold text-gray-900 dark:text-white">{{ totalOrders }}</h4>
                <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Gesamtanzahl Bestellungen</span>
            </div>
            <div class="flex h-12 w-12 items-center justify-center rounded-full bg-purple-50 dark:bg-purple-900/20">
                <svg class="fill-purple-600 dark:fill-purple-400" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                </svg>
            </div>
        </div>
        <div class="mt-4">
            <span class="text-sm font-medium text-purple-600 dark:text-purple-400">
                Bestellungen anzeigen →
            </span>
        </div>
    </div>

    <!-- Total Suppliers Card -->
    <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="flex items-center justify-between">
            <div>
                <h4 class="text-xl font-bold text-gray-900 dark:text-white">{{ totalSuppliers }}</h4>
                <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Gesamtanzahl Lieferanten</span>
            </div>
            <div class="flex h-12 w-12 items-center justify-center rounded-full bg-orange-50 dark:bg-orange-900/20">
                <svg class="fill-orange-600 dark:fill-orange-400" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                </svg>
            </div>
        </div>
        <div class="mt-4">
            <span class="text-sm font-medium text-orange-600 dark:text-orange-400">
                Lieferanten anzeigen →
            </span>
        </div>
    </div>
</div>

<!-- Recent Items Section -->
<div class="grid grid-cols-1 gap-4 md:gap-6 xl:grid-cols-2 2xl:gap-7">
    <!-- Recent Products -->
    <div class="rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-800">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Kürzlich hinzugefügte Produkte</h3>
        </div>
        <div class="p-6">
            <div class="space-y-4">
                {% for product in recentProducts %}
                    <div class="flex items-start justify-between border-b border-gray-100 pb-4 last:border-0 last:pb-0 dark:border-gray-800">
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-900 dark:text-white">{{ product.ProductName }}</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400">
                                Bestand: {{ product.UnitsInStock }}
                                {% if product.Discontinued %}
                                    <span class="ml-2 rounded-full bg-red-100 px-2 py-0.5 text-xs font-medium text-red-800 dark:bg-red-900/20 dark:text-red-400">
                                        Eingestellt
                                    </span>
                                {% endif %}
                            </p>
                            <p class="text-xs text-gray-400 dark:text-gray-500">
                                Produkt ID: {{ product.ProductID }}
                            </p>
                        </div>
                        {% if product.UnitPrice %}
                            <span class="text-sm font-semibold text-blue-600 dark:text-blue-400">
                                ${{ product.UnitPrice }}
                            </span>
                        {% endif %}
                    </div>
                {% else %}
                    <p class="text-center text-gray-500 dark:text-gray-400">Noch keine Produkte hinzugefügt</p>
                {% endfor %}
            </div>
            {% if recentProducts|length > 0 %}
                <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-800">
                    <span class="text-sm font-medium text-blue-600 dark:text-blue-400">
                        Alle Produkte anzeigen →
                    </span>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Recent Orders -->
    <div class="rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-800">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Letzte Bestellungen</h3>
        </div>
        <div class="p-6">
            <div class="space-y-4">
                {% for order in recentOrders %}
                    <div class="flex items-start justify-between border-b border-gray-100 pb-4 last:border-0 last:pb-0 dark:border-gray-800">
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-900 dark:text-white">Bestellung #{{ order.OrderID }}</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400">
                                Kunde: {{ order.CustomerID }}
                            </p>
                            <p class="text-xs text-gray-400 dark:text-gray-500">
                                {% if order.OrderDate %}
                                    {{ order.OrderDate|date('d.m.Y') }}
                                {% endif %}
                                {% if order.ShippedDate %}
                                    • Versandt: {{ order.ShippedDate|date('d.m.Y') }}
                                {% endif %}
                            </p>
                        </div>
                        {% if order.Freight %}
                            <span class="text-sm font-semibold text-purple-600 dark:text-purple-400">
                                ${{ order.Freight }}
                            </span>
                        {% endif %}
                    </div>
                {% else %}
                    <p class="text-center text-gray-500 dark:text-gray-400">Noch keine Bestellungen</p>
                {% endfor %}
            </div>
            {% if recentOrders|length > 0 %}
                <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-800">
                    <span class="text-sm font-medium text-blue-600 dark:text-blue-400">
                        Alle Bestellungen anzeigen →
                    </span>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="mt-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900">
    <h3 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Schnellaktionen</h3>
    <div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6">
        <a href="#" class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-4 transition hover:border-blue-500 hover:bg-blue-50 dark:border-gray-700 dark:hover:border-blue-500 dark:hover:bg-blue-900/10">
            <svg class="mb-2 h-8 w-8 fill-gray-400" viewBox="0 0 24 24">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Neues Produkt</span>
        </a>

        <a href="#" class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-4 transition hover:border-green-500 hover:bg-green-50 dark:border-gray-700 dark:hover:border-green-500 dark:hover:bg-green-900/10">
            <svg class="mb-2 h-8 w-8 fill-gray-400" viewBox="0 0 24 24">
                <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Neuer Kunde</span>
        </a>

        <a href="#" class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-4 transition hover:border-purple-500 hover:bg-purple-50 dark:border-gray-700 dark:hover:border-purple-500 dark:hover:bg-purple-900/10">
            <svg class="mb-2 h-8 w-8 fill-gray-400" viewBox="0 0 24 24">
                <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Neue Bestellung</span>
        </a>

        <a href="#" class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-4 transition hover:border-orange-500 hover:bg-orange-50 dark:border-gray-700 dark:hover:border-orange-500 dark:hover:bg-orange-900/10">
            <svg class="mb-2 h-8 w-8 fill-gray-400" viewBox="0 0 24 24">
                <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Lieferanten</span>
        </a>

        <a href="#" class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-4 transition hover:border-indigo-500 hover:bg-indigo-50 dark:border-gray-700 dark:hover:border-indigo-500 dark:hover:bg-indigo-900/10">
            <svg class="mb-2 h-8 w-8 fill-gray-400" viewBox="0 0 24 24">
                <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Berichte</span>
        </a>

        <a href="{{ path('app_database_selection') }}" class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-4 transition hover:border-pink-500 hover:bg-pink-50 dark:border-gray-700 dark:hover:border-pink-500 dark:hover:bg-pink-900/10">
            <svg class="mb-2 h-8 w-8 fill-gray-400" viewBox="0 0 24 24">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">DB Auswahl</span>
        </a>
    </div>
</div>

<!-- Info Box -->
<div class="mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-800 dark:bg-blue-900/20">
    <div class="flex items-start">
        <svg class="mr-3 h-5 w-5 fill-blue-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
        </svg>
        <div>
            <h4 class="text-sm font-semibold text-blue-900 dark:text-blue-200 mb-1">Northwind Dashboard Template</h4>
            <p class="text-sm text-blue-800 dark:text-blue-300">
                Dies ist ein Template-Dashboard für die Northwind-Datenbank. 
                Sie können es nach Ihren Wünschen anpassen und erweitern.
                Die Schnellaktionen-Links müssen noch mit den entsprechenden Routen verbunden werden.
            </p>
        </div>
    </div>
</div>
{% endblock %}
