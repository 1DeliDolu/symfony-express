{% extends 'northwind_base.html.twig' %}

{% block page_title %}Edit Order #{{ order.OrderID }}{% endblock %}

{% block body %}
<div class="container mx-auto px-4 py-6">
    <!-- Back Button -->
    <div class="mb-4">
        <a href="{{ path('app_northwind_orders_show', {'id': order.OrderID}) }}" 
           class="inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-800 dark:text-indigo-400">
            <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            Back to Order Details
        </a>
    </div>

    <!-- Edit Form -->
    <div class="rounded-lg bg-white p-6 shadow dark:bg-gray-800">
        <div class="mb-6 border-b border-gray-200 pb-4 dark:border-gray-700">
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
                Edit Order #{{ order.OrderID }}
            </h1>
        </div>

        <form method="POST" class="space-y-6">
            <!-- Customer Information -->
            <div class="rounded-lg border border-gray-200 p-4 dark:border-gray-700">
                <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Customer Information</h2>
                
                <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                    <div>
                        <label for="customer_id" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Customer <span class="text-red-500">*</span>
                        </label>
                        <select 
                            name="customer_id" 
                            id="customer_id" 
                            required
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                            {% for customer in customers %}
                                <option value="{{ customer.CustomerID }}" {% if customer.CustomerID == order.CustomerID %}selected{% endif %}>
                                    {{ customer.CompanyName }} ({{ customer.CustomerID }})
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div>
                        <label for="employee_id" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Employee
                        </label>
                        <select 
                            name="employee_id" 
                            id="employee_id"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                            <option value="">-- Select Employee --</option>
                            {% for employee in employees %}
                                <option value="{{ employee.EmployeeID }}" {% if employee.EmployeeID == order.EmployeeID %}selected{% endif %}>
                                    {{ employee.LastName }}, {{ employee.FirstName }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <!-- Dates -->
            <div class="rounded-lg border border-gray-200 p-4 dark:border-gray-700">
                <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Dates</h2>
                
                <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
                    <div>
                        <label for="order_date" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Order Date
                        </label>
                        <input 
                            type="datetime-local" 
                            name="order_date" 
                            id="order_date"
                            value="{{ order.OrderDate ? order.OrderDate|date('Y-m-d\\TH:i') : '' }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div>
                        <label for="required_date" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Required Date
                        </label>
                        <input 
                            type="datetime-local" 
                            name="required_date" 
                            id="required_date"
                            value="{{ order.RequiredDate ? order.RequiredDate|date('Y-m-d\\TH:i') : '' }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div>
                        <label for="shipped_date" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Shipped Date
                        </label>
                        <input 
                            type="datetime-local" 
                            name="shipped_date" 
                            id="shipped_date"
                            value="{{ order.ShippedDate ? order.ShippedDate|date('Y-m-d\\TH:i') : '' }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>
                </div>
            </div>

            <!-- Shipping Information -->
            <div class="rounded-lg border border-gray-200 p-4 dark:border-gray-700">
                <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Shipping Information</h2>
                
                <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                    <div>
                        <label for="ship_via" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Ship Via
                        </label>
                        <select 
                            name="ship_via" 
                            id="ship_via"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                            <option value="">-- Select Shipper --</option>
                            {% for shipper in shippers %}
                                <option value="{{ shipper.ShipperID }}" {% if shipper.ShipperID == order.ShipVia %}selected{% endif %}>
                                    {{ shipper.CompanyName }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div>
                        <label for="freight" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Freight
                        </label>
                        <input 
                            type="number" 
                            step="0.01" 
                            name="freight" 
                            id="freight"
                            value="{{ order.Freight }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div class="md:col-span-2">
                        <label for="ship_name" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Ship Name
                        </label>
                        <input 
                            type="text" 
                            name="ship_name" 
                            id="ship_name"
                            value="{{ order.ShipName }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div class="md:col-span-2">
                        <label for="ship_address" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Ship Address
                        </label>
                        <input 
                            type="text" 
                            name="ship_address" 
                            id="ship_address"
                            value="{{ order.ShipAddress }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div>
                        <label for="ship_city" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Ship City
                        </label>
                        <input 
                            type="text" 
                            name="ship_city" 
                            id="ship_city"
                            value="{{ order.ShipCity }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div>
                        <label for="ship_region" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Ship Region
                        </label>
                        <input 
                            type="text" 
                            name="ship_region" 
                            id="ship_region"
                            value="{{ order.ShipRegion }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div>
                        <label for="ship_postal_code" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Ship Postal Code
                        </label>
                        <input 
                            type="text" 
                            name="ship_postal_code" 
                            id="ship_postal_code"
                            value="{{ order.ShipPostalCode }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>

                    <div>
                        <label for="ship_country" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Ship Country
                        </label>
                        <input 
                            type="text" 
                            name="ship_country" 
                            id="ship_country"
                            value="{{ order.ShipCountry }}"
                            class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center justify-end gap-4 border-t border-gray-200 pt-6 dark:border-gray-700">
                <a href="{{ path('app_northwind_orders_show', {'id': order.OrderID}) }}"
                   class="rounded-lg border border-gray-300 bg-white px-6 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700">
                    Cancel
                </a>
                <button 
                    type="submit"
                    class="rounded-lg bg-indigo-600 px-6 py-2.5 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 dark:bg-indigo-600 dark:hover:bg-indigo-700">
                    Update Order
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
